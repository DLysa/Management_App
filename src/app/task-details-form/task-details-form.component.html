<div class="container">
  <!--  <h2 mat-dialog-title></h2>-->
  <div *ngIf="roles !== 'GUEST '">
  <button mat-raised-button color="primary" id=edit-btn (click)="editClick()"  > {{action}}</button>
  <button *ngIf="!selectedTask.archive" mat-raised-button style="background-color:#A50087;color:white " id="delete-btn" (click)="archiveTask()"> Archive </button>
  </div>
  <div *ngIf="roles !== 'MANAGER '">
  <button  mat-button color="warn" class="in_progress" (click)="activityChange()">{{activity}}</button>
  </div>

  <div class="content">

    <div *ngIf="action!='Edit'; else elseBlock">
      <mat-form-field appearance="outline" class="title_input">
        <mat-label class="description-field-label">Title:</mat-label>
        <input matInput class="title-field" type="text" [(ngModel)]="selectedTask.title" value="{{selectedTask.title}}"><br>
      </mat-form-field>
      <br>
      <mat-form-field appearance="outline" class="description_input">
        <mat-label class="description-field-label">Description:</mat-label>
        <input matInput class="description-input" type="text" [(ngModel)]="selectedTask.description" value="{{selectedTask.description}}">
      </mat-form-field>
      <br>
      <mat-form-field appearance="outline" class="status_input">
        <mat-label class="status-field-label">Status:</mat-label>
                <mat-select class="status-input" type="text" [(ngModel)]="selectedTask.status" value="{{selectedTask.status}}">
          <mat-option *ngFor="let status of orderStatus" [value]="status.name">
            {{status.name}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field *ngIf="roles === 'MANAGER '" appearance="outline" class="assignee-input">
        <mat-label class="assignee-field-label">Assigned to:</mat-label>
        <mat-select class="assignee-input-select" type="text" [(ngModel)]="selectedTask.workingFullName" value="{{selectedTask.workingFullName}}" (selectionChange)="onUserSelect($event)">
          <mat-option>None</mat-option>
          <mat-option *ngFor="let user of assignableUsers" [value]="user.firstName + ' ' + user.lastName">
            {{user.firstName}} {{user.lastName}} - {{user.roles[0].role}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="roles !== 'MANAGER '" >
        <div class="user-inprogress firstname"> {{currentUserFirstName }} </div>
        <div class="user-inprogress lastname" > {{currentUserLastName }} </div>
      </div>
    </div>

    <ng-template #elseBlock>
      <div class="title">
        {{selectedTask.title}}
      </div>

      <div class="description">
        <label class="description-label">Description:</label> <br>
        {{selectedTask.description}}
      </div>
      <div class="status">
        <label class="status-label">Status:</label> <br>
        {{selectedTask.status}}
      </div>
      <div >
        <div class="user-inprogress firstname"> {{currentUserFirstName }} </div>
        <div class="user-inprogress lastname" > {{currentUserLastName }} </div>
      </div>
    </ng-template>
  </div>

  <mat-divider></mat-divider>

  <app-comments></app-comments>

  <mat-dialog-actions class="mat-dialog-actions">
    <button mat-raised-button color="primary" id="close" (click)="close()">Close</button>
  </mat-dialog-actions>

</div>
